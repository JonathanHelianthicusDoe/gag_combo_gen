\documentclass[a4paper]{article}

%% Language and font encodings
\usepackage[english]{babel}
\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[section]{placeins}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{subcaption}

%% Sets page size and margins
\usepackage[a4paper,top=3cm,bottom=2cm,left=3cm,right=3cm,marginparwidth=1.75cm]{geometry}

%% Useful packages
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage[colorinlistoftodos]{todonotes}
\usepackage[colorlinks=true, allcolors=blue]{hyperref}
\usepackage{enumitem}
\usepackage{mathtools}
\usepackage{tikz}
\usepackage{bbm}

% INDENT? NYET
%\setlength\parindent{0pt}

\title{Optimizing Single-Round, Single-Target Gag Choices Interactively}
\author{Dr. Jonathan Helianthicus Doe, IV}
\date{2018, March}

\begin{document}

\maketitle

\section{Posing the problem}

\begin{itemize}
\item $opt[n][hp][orgs]$ is the value of the largest-valued gag in the set of $n$ gags which when combined deals at least $hp$ damage and contains at most $orgs$ organic gags, such that the value of the largest-valued gag is minimized.
\item $G$ is the set of gags, including the ``empty gag'', i.e. passing.
\item $G'$ is the subset of $G$ that is organic.
\item $dmg(\cdot)$ takes in a gag as an argument and returns the net HP loss its use incurs (it's actually not this simple, but it works well enough to create the proper recurrence).
\end{itemize}

\textbf{Constant for the whole problem:} cog level, ``is the cog v2.0?'', ``is the cog lured?'', $G$, $G'$.

\[
opt[n][hp][orgs] =
  \min_{gag \in G}\left\{\max\left(opt[n - 1][hp - dmg(gag)][orgs - \mathbbm{1}_{G'}(gag)], \; gag\right)\right\}.
\]

\section{Defining a well-order on the set $G$}

In order to make sense of the ``$\min$'' and ``$\max$'' above we want to define a well-order on the set of gags $G$ that captures the intuitive notion that higher level gags are worth more, that some gag types (squirt, sound, etc.) are worth more than others, and that organic gags are worth more than non-organic gags. Preferably, we care about those three aspects in exactly that order, which suggests that we can simply define a lexicographical order.

We could represent each gag, then, as a triplet $\left(l, \tau, o\right)$ where $l$ is the level of the gag (e.g. for a squirting flower $l=1$, for a foghorn $l=6$, etc.), $\tau$ is the type of the gag (squirt, sound, etc.), and $o=1$ when the gag is organic and $o=0$ otherwise. The only gag not represented this way is ``pass'', which is clearly just the least element of $G$.

Then we would only need to choose a perference ordering for the possible gag types $\tau$; for example we might use $\left\{\text{drop} \leq \text{trap} \leq \text{squirt} \leq \text{throw} \leq \text{sound}\right\}$. Now $l$, $\tau$, and $o$ have obvious orderings and the lexicographical ordering on the set of gags $\left(l, \tau, o\right) \in G$ emerges.

In reality, however, this is a somewhat \textit{crude} ordering; it is very reasonable to assert $\text{foghorn} > \text{cake}$ ($\left(6, \text{sound}, 0\right) > \left(6, \text{throw}, 0\right)$), but also assert $\text{cream pie} > \text{elephant trunk}$ ($\left(5, \text{throw}, 0\right) > \left(5, \text{sound}, 0\right)$). There are other examples like this too, and because of that it is probably best to simply hand-pick an ordering (at worst having $5 \cdot 7 = 35$ elements, since we exclude toonup and lure).

\section{The slightly mysterious $dmg(\cdot)$ function}

The $dmg(\cdot)$ function used in the definition of $opt$ in section 1 actually conceals an additional parameter that $opt$ takes, which is a map $M$ from gag types $\tau$ to indicators $d$ that have $3$ possibilities:

\begin{itemize}
  \item This gag type has not been used at all yet.

  \item This gag type has been used once, for $x$ damage.

  \item This gag type has been used more than once, for $x$ damage.
\end{itemize}

This is sufficient to define $dmg(\cdot)$ and have it correctly calculate ``yellow'' and ``orange'' damage:

\[
opt[n][hp][orgs][M] =
  \min_{gag \in G}\left\{\max\left(opt[n - 1][hp - dmg(gag)][orgs - \mathbbm{1}_{G'}(gag)][update(M, gag)], \; gag\right)\right\}.
\]

The problem as a whole is then $opt[n][hp][orgs][\varnothing]$.

\section{Tiebreaking}

\end{document}
